<label class="swap swap-rotate">
  <!-- this hidden checkbox controls the state -->
  <input type="checkbox" id="swap-menu" />

  <!-- sun icon -->
  <svg
    class="swap-off fill-current text-green-primary"
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 512 512"
  >
    <path
      d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"
    ></path>
  </svg>

  <!-- moon icon -->
  <svg
    class="swap-on fill-current text-green-primary"
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 512 512"
  >
    <polygon
      points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"
    ></polygon>
  </svg>
</label>

<script>
  let isOpen = false
  const toggleButtonMenu = document.getElementById('swap-menu') as Element
  const burgerMenu = document.getElementById('burger-menu') as HTMLElement

  toggleButtonMenu?.addEventListener('click', () => {
    toggleMenu()
  })

  const toggleMenu = () => {
    isOpen = !isOpen
    if (isOpen) {
      document.documentElement.style.overflow = 'hidden'
      document.body.style.overflow = 'hidden'
      document.body.style.position = 'relative' // ✅ Évite que le menu passe en fixed
      burgerMenu?.classList.add('swap-active')
      burgerMenu?.classList.remove('hidden')
    } else {
      document.documentElement.style.overflow = 'auto'
      document.body.style.overflow = 'auto'
      document.body.style.position = 'absolute' // ✅ Rétablir la position normale
      burgerMenu?.classList.add('hidden')
      burgerMenu?.classList.remove('swap-active')
    }
  }
</script>
